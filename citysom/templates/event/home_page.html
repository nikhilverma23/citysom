{% extends "base.html" %}

{% block title %}Citysom{% endblock %}

{% block content %}
<!--        <div class="filledarea">
        	<div id="headingtext">April 2012</div>
            <div id="sundayarea"><img src="/static/images/sundayimg.png" width="508" height="17" alt="sunday" /></div>
        </div>	 -->
        <div class="clear"></div>
        <div id="home_calendar"></div>
        <div class="clear"></div>
        <!-- filledarea main start from here -->
         <div class="filter_section">
        	<div class="minprice_main">
            	<div class="minprice_heading" style="padding:0px 0px 0px 6px;">Min.Price</div>
                <div class="minprice_heading">
                	<div class="nextbutton"><a href="javascript:void(0)" id="min_price_down"><img src="/static/images/button_down.png" /></a></div>
                    <div class="textbox">$<span id="min_price_span">0</span><input name="min_price" id="min_price" type="hidden" value="0"/></div>
                    <div class="nextbutton"><a href="javascript:void(0)" id="min_price_up"><img src="/static/images/button_up.png"/></a></div>
                </div>
            </div>
            
            <div class="minprice_main">
            	<div class="minprice_heading" style="padding:0px 0px 0px 6px;">Max.Price</div>
                <div class="minprice_heading">
                	<div class="nextbutton"><a href="javascript:void(0)" id="max_price_down"><img src="/static/images/button_down.png" /></a></div>
                    <div class="textbox">$<span id="max_price_span">0</span><input name="max_price" id="max_price" type="hidden" value="0"/></div>
                    <div class="nextbutton"><a href="javascript:void(0)" id="max_price_up"><img src="/static/images/button_up.png"/></a></div>
                </div>
            </div>
            
            <div class="minprice_main">
            	<div class="minprice_heading" style="padding:0px 0px 0px 6px;">Start Time</div>
                <div class="minprice_heading">
                	<div class="nextbutton"><a href="javascript:void(0)" id="max_time_down"><img src="/static/images/button_down.png" /></a></div>
                    <div class="textbox"><span id="max_time_span">8:00</span><input name="max_time" id="max_time" type="hidden" value="8:00" /></div>
                    <div class="nextbutton"><a href="javascript:void(0)" id="max_time_up"><img src="/static/images/button_up.png"/></a></div>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="minprice_main">
                    <div class="minprice_heading">Event Type</div>
                    <div class="minprice_heading">
                        <select name="category" id="category" style="background-color: black;width:150px; margin-top: 3px;font-weight:normal; font-family: Helvetica; border-radius:5px; border:1px #AAA; color:white;"> 
                        		<option value="">All</option>
                        		{% for cat in category %}
                        			<option value="{{cat.id}}">{{cat}}</option>
                        		{% endfor %}
                        </select>
                    </div>
                </div>
           
        </div>
         <!-- filledarea main end from here -->
          <!-- filledarea start from here -->
         <div class="filledarea1" style="width: 967px !important; float: left; position:relative;">
         <div class="everything_area">
				<ul>
    				<li class="every_heading"><a href="index.html"><div class="everything_icon"><img src="/static/images/searchicon.png" width="24" height="24" alt="icon" /></div>        &nbsp;&nbsp;Everything</a></li>
					<li><a href="category.html"><div class="everything_icon"><img src="/static/images/cateicon.png" width="27" height="19" alt="icon" /></div>        &nbsp;&nbsp;Categories</a></li>
					<li><a href="category.html"><div class="everything_icon"><img src="/static/images/voice_icon.png" width="16" height="26" alt="icon" /></div>    &nbsp;Concerts</a></li>
	<li style="width:auto;"><a href="#">More &nbsp;&nbsp;></a></li>
</ul>
            </div>   
           <div id="categories" class="menurecipes_content eve" >
                                  <div id="bottom_scroll">
                           <div class="left_region">
                            <div class="event_type">
                                   <h6 style="font-weight:bold;margin-bottom: 20px;margin-left: 14px;">Event Type</h6>
                            </div>
                            <div class="left_images">
                                    <ul>
                                        <li><img style="padding: 3px;" src="/static/images/concerts.png" width="120" height="170" alt="1"  /></li>
                                        <li><img style="padding: 3px;" src="/static/images/plays.png" width="120" height="170" alt="1" /></li>  
                                        <li><img style="padding: 3px;" src="/static/images/lectures.png" width="120" height="170" alt="1" /></li>
                                    </ul>
                            </div>
                  </div>
                  <div class="right_region">
                            <div class="start_time">
                            <h6 style="font-weight: bold; margin-bottom:20px;margin-right:98px;">Arrange Time : Start Time</h6>
                        </div>
                            <div class="right_images">  
                             <ul>
                                <li><img style="padding-bottom:5px;" src="/static/images/churchillimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/brieitimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/clreusimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/fooimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/carimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/cameraimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/agentimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/verdictimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/cameraimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/agentimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/verdictimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/churchillimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/brieitimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/clreusimg.png" width="130" height="170" alt="1" /></li>
                                <li><img style="padding-bottom:5px;" src="/static/images/fooimg.png" width="130" height="170" alt="1" /></li>
                            </ul>
                         </div>
                 </div>
                 </div>
           </div>
           <div id="everything1" class="menurecipes_content text" >
                <div id="bottom_images"></div>
           </div>
           <div id="concerts">
           </div>
      </div> 
      <script>
  		var step = 10;
  		var timestep = 15;
  		
  		function load_events()
  		{
  			url = '/event/event_list/?view=list';
  			min_price = parseInt($("#min_price").val());
  			max_price = parseInt($("#max_price").val());
  			event_date = $(".calendar_active").attr("rel");
  			start_time = $("#max_time").val();
  			category = $("#category").val();
  			keyword = $("#searchtextarea").val();
  			
  			if(min_price)
  				url +='&min_price='+min_price;
  			if(max_price)
  				url +='&max_price='+max_price;
  			if(event_date)
  				url +='&event_date='+event_date;
  			if(start_time)
  				url +='&start_time='+start_time;
  			if(category)
  				url +='&category='+category;
  			if(keyword)
  				url +='&keyword='+keyword;
  				
	  		$.get(url,
	  			function(data)
	  			{
					$("#bottom_images").html(data);
	  			}
	  		);
	  	}
  		
  		$("#min_price_down").click(function(){
  			var current_price = parseInt($("#min_price").val())-step;
  			if(current_price >= 0)
  			{
  				$("#min_price").val(current_price);
  				$("#min_price_span").html(current_price);
  				load_events();
  			}
  		});
  		$("#min_price_up").click(function(){
  			var current_price = parseInt($("#min_price").val())+step;
  			$("#min_price").val(current_price);
  			$("#min_price_span").html(current_price);
  			load_events();
  		});
  		
  		$("#max_price_down").click(function(){
  			var current_max_price = parseInt($("#max_price").val())-step;
  			if(current_max_price >= 0)
  			{
  				$("#max_price").val(current_max_price);
  				$("#max_price_span").html(current_max_price);
  				load_events();
  			}
  		});
  		$("#max_price_up").click(function(){
  			var current_max_price = parseInt($("#max_price").val())+step;
  			$("#max_price").val(current_max_price);
  			$("#max_price_span").html(current_max_price);
  			load_events();
  		});
  		
  		var variable_date = new Date();
  		variable_date.setHours(8);
  		variable_date.setMinutes(0);
  		variable_date.setSeconds(0);
  		var current_formatted_date;
  		$("#max_time_down").click(function(){
  			variable_date.setMinutes(variable_date.getMinutes()-timestep);
			current_formatted_date = variable_date.getHours()+":"+variable_date.getMinutes();
			$("#max_time").val(current_formatted_date);
			$("#max_time_span").html(current_formatted_date);
			load_events();
  		});
  		$("#max_time_up").click(function()
  		{
			variable_date.setMinutes(variable_date.getMinutes()+timestep);
			current_formatted_date = variable_date.getHours()+":"+variable_date.getMinutes();
			$("#max_time").val(current_formatted_date);
			$("#max_time_span").html(current_formatted_date);
			load_events();
  		});
  		
  		$.get(
  			"/event/calendar/",
  			function (data)
  			{
  				$("#home_calendar").html(data);
  				load_events();
  			}
  		);
  		$("#home_calendar").on("click", "#days_container>a", function(event){
			$("a.calendar_active").removeClass("calendar_active");
  			$(this).addClass("calendar_active");
  			load_events();
		});
		
		$("#home_calendar").on("click", "a.calendar_nav_links", function(event){
			event.preventDefault();
			url = $(this).attr("href");
			$.get(
	  			url,
	  			function (data)
	  			{
	  				$("#home_calendar").html(data);
	  			}
	  		);
		});
		
		$("#category").change(function(){
			load_events();
		});
		$("#searchbutton").click(function(){
			load_events();
		});
      </script>
{% endblock %}




